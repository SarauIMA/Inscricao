<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="styleinsc.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jura:wght@300..700&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <title>Inscrição</title>
</head>
<body>
    <script type="module">
        // Importações Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCuEpu6-I7c9PGSe-OOsNGcphrswVoNqjk",
            authDomain: "sarau-bac13.firebaseapp.com",
            projectId: "sarau-bac13",
            storageBucket: "sarau-bac13.appspot.com",
            messagingSenderId: "172569092550",
            appId: "1:172569092550:web:f13377a51bbbda6be6d2c7",
            measurementId: "G-NQSMZWL4P3"
        };

        // Inicialização
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Captura do formulário
        const form = document.querySelector("form");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            // Pegar valores
            const nome = document.getElementById("nome").value;
            const telefone = document.getElementById("tel").value;
            const serie = document.getElementById("serie").value;
            const apresentacao = document.querySelector("input[name='apresentacao']:checked")?.value || "";
            const musica = document.getElementById("musicaInput").value;
            const outraApresentacao = document.getElementById("outroInput").value;
            const turma = document.getElementById("participantes").checked;
            const numeroParticipantes = document.getElementById("numero").value;
            const nomesParticipantes = document.getElementById("nomepartipantesInput").value;

            try {
                // Salvar no Firestore
                await addDoc(collection(db, "inscricoes"), {
                    nome,
                    telefone,
                    serie,
                    apresentacao,
                    musica,
                    outraApresentacao,
                    turma,
                    numeroParticipantes,
                    nomesParticipantes,
                    criadoEm: new Date()
                        });
            window.location.href = "inscrito.html";

            } catch (error) {
                console.error("Erro ao enviar inscrição: ", error);
                alert("Erro ao enviar, tente novamente.");
            }

        });
    </script>


    <div class="cabecalho">
        <h1>Inscrição</h1>
        <a href="index.html">&#11013 Voltar</a>
    </div>
    <div class="info">
        <div id="Form">
            <form>

                <label for="nome" class="desc">Nome: </label>
                <input type="text" name="nome" id="nome" required> <br>


                <label for="tel" class="desc">Telefone: </label>
                <input type="tel" name="telefone" id="tel" required> <br>


                <div id="container">

                    <div id="serie-container">
                        <label for="serie">Serie:</label>
                            <select name="serie" id="serie" required>
                                <option value="6">6°</option>
                                <option value="7">7°</option>
                                <option value="8">8°</option>
                                <option value="9">9°</option>
                                <option value="1">1°</option>
                                <option value="2">2°</option>
                                <option value="3">3°</option>
                            </select> <br>
                    </div>
                

                     <div id="apresentacao">
                         <label>Apresentação:</label> <br>
        
                        <input type="radio" name="apresentacao" value="canto" id="canto">
                        <label for="canto">Canto</label> <br>
                        <input type="radio" name="apresentacao" value="danca" id="danca">
                        <label for="danca">Dança</label> <br>
                        <input type="radio" name="apresentacao" value="instrumento" id="instrumento">
                        <label for="instrumento">Tocar Instrumento</label> <br>
                        <input type="radio" name="apresentacao" value="outro" id="outroRadio">
                        <label for="outroRadio">Outro</label><br>
        
                     </div>

                </div>

        
                <div id="musica">
                    <label for="Nome_Musica" class="desc">Qual sua Musica?: </label>
                    <input type="text" id="musicaInput" name="Nome_Musica">
                </div>
                <div id="outro">
                    <label for="outra_apresentacao" class="desc">Qual outra apresentação?: </label>
                    <input type="text" id="outroInput" name="outra_apresentacao">
                </div>

                <input type="checkbox" name="chec" id="participantes">
                <label for="check" class="desc" id="check">Apresentação de Turma</label>
                <br>
                <label for="numero_de_partipantes" class="desc">Numero de participantes</label>
                <input type="number" id="numero" name="numero_de_partipantes" required> <br>


                <div id="nomepartipantes">
                    <label for="nomepartipantes" class="desc">Nome dos participantes</label> <br>
                    <input type="text" id="nomepartipantesInput" name="nomepartipantes">
                </div>


                <button id="enviar">Enviar</button>

                <p></p>
            </form>
        </div>
    </div>
    <div class="rodape">
        <p>Sarau 2° Serie</p>
    </div>
    
</body>
<script src="script.js"></script>
</html>